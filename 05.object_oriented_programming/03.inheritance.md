# 3. 継承

オブジェクト指向では、クラス間の親子関係を築くことで、親クラスのコードを子クラスから利用することができ、コードの再利用性と保守性を高めることができます。これを**継承**と言います。

## 継承の基本

* **親クラス（スーパークラス）**：継承元のクラス
* **子クラス（サブクラス）**：親クラスから継承するクラス

子クラスは、親クラスで子クラスからアクセス可能としてあるすべての属性とメソッドを継承します。さらに、親クラスの属性やメソッドを上書き（オーバーライド）したり、子クラス独自の属性やメソッドを追加することもできます。

```ruby
class Animal
  def initialize(name)
    @name = name
  end

  def eat
    puts "#{@name}が食べます。"
  end
end

class Dog < Animal
  def bark
    puts "#{@name}が吠えます。"
  end
end

dog = Dog.new("ポチ")
dog.eat  # => ポチが食べます。
dog.bark # => ポチが吠えます。
```

この例では、`Animal`クラスが親クラス、`Dog`クラスが子クラスです。`Dog`クラスは、`Animal`クラスの`eat`メソッドを継承し、さらに独自のメソッド`bark`を持っています。

## superキーワード
子クラスのメソッド内で、親クラスの同名メソッドを呼び出すには、`super`キーワードを使用します。

```ruby
class Dog < Animal
  def eat
    super
    puts "ドッグフードを食べます。"
  end
end

dog.eat  # => ポチが食べます。
# => ドッグフードを食べます。
```

この例では、`Dog`クラスの`eat`メソッドは、まず`super`で親クラスの`eat`メソッドを呼び出し、その後、独自の処理を追加しています。

## ミックスイン

Rubyでは、子クラスは1つの親クラスからのみ継承を行うことができます。これを単一継承と言います。C++やPythonでは複数の親クラスから継承することができ、このような継承を多重継承と言います。

Rubyでは、複数のモジュールをクラスに取り込むことができ、これをミックスインと言います。ミックスインは、複数のモジュールの機能を1つのクラスに統合する仕組みで、多重継承と似たような機能を実現します。ミックスインは、`include`キーワードを用いて行われます。

```ruby
module Walkable
  def walk
    puts "I'm walking."
  end
end

module Talkable
  def talk
    puts "I'm talking."
  end
end

class Robot
  include Walkable
  include Talkable

  def initialize(name)
    @name = name
  end

  def introduce
    puts "My name is #{@name}."
    walk
    talk
  end
end
```

上記コードは、`Walkable`と`Talkable`という2つのモジュールを定義します。`Robot`クラスは、`Walkable`と`Talkable`モジュールをミックスインすることで、両方のモジュールの機能を使用することができます。

## 継承のメリット
* **コードの再利用:** 共通の属性やメソッドを親クラスにまとめることで、コードの重複を減らせます。
* **コードの保守性:** 親クラスを変更すると、子クラスにも自動的に変更が反映されます。
* **クラス階層の構築:** クラス間の関係を階層的に表現することで、プログラムの構造を整理し、理解しやすくします。

## 継承の注意点
* **継承の深さ:** 継承の階層が深くなると、プログラムの構造が複雑になり、保守性が低下する可能性があります。
* **is-aの関係:** 子クラスは、親クラスの「一種」であるという関係を保つ必要があります。例えば、「車」と「タイヤ」はis-aの関係ではないため、継承は適切ではありません。
* **ダイヤモンド問題:** 複数の親クラス(Rubyの場合は複数のモジュール)から継承する場合に、メソッドの呼び出しが曖昧になる問題が発生する可能性があります。

## 他の言語の継承元
* **抽象クラス (Abstract Class)**    
抽象クラスは、未完成のクラスであり、インスタンス化（オブジェクトの生成）ができません。抽象クラスは、子クラスに継承されることを意図して、抽象メソッドを定義します。

* **インターフェース (Interface)**    
インターフェースは、クラスが実装すべきメソッドの集合を定義したものです。インターフェース自身はインスタンス化できず、他のクラスがインターフェースを実装することで、そのメソッドを定義する必要があります。
