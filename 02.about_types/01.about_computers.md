# 1. コンピュータのしくみ

ここではまずコンピュータのしくみの概要について説明します。

## コンピュータの構成

コンピュータは主に以下のような要素で構成されています。

```
                 +-----+
      ...........| CPU |...........
      :          +-----+          :
      :             |             :
+----------+   +---------+   +----------+
| Input    |-->| Memory  |-->| Output   |
|   Device |   +---------+   |   Device |
+----------+        |        +----------+
               +---------+
               | Storage |
               +---------+             
```

* **CPU (中央演算処理装置)**：コンピュータの頭脳
* **メモリ**：データやプログラムを一時的に記憶
* **ストレージ**：データやプログラムを長期的に保存
* **入力装置**：キーボード、マウス、タッチパネルなど
* **出力装置**：ディスプレイ、プリンター、スピーカーなど

キーボードやマウスなどの操作が入力されると、CPUの制御によってデータがメモリに書き込まれます。そのデータを同じくメモリ上にあるプログラムとともにCPUで処理し、結果がまたメモリに書き込まれます。そのメモリ上の結果がCPUの制御でディスプレイなどに出力されます。

## OS

コンピュータを構成する要素は共通ですが、機器はコンピュータごとに異なります。また、コンピュータでは複数のソフトウェアを同時に動かします。ソフトウェアがそういったことを意識することなく実行できるようにしてくれるのがOSです。主な役割は以下の通りです。

* **ハードウェアの管理**：CPU、メモリ、ストレージなどのハードウェアを管理
* **メモリ管理**：アプリケーション(特定の目的のためのソフトウェア)のメモリ割り当てと解放
* **プロセス管理**：複数のアプリケーションを同時に実行
* **ファイル管理**：ファイルの作成、読み書き、削除
* **セキュリティ**：コンピュータへの不正アクセスを防ぐ

代表的なOSには、Windows、Mac OS、Linuxなどがあります。

## メモリ

コンピュータの構成で触れた通り、データやプログラムはメモリを介して、CPU、入力装置、出力装置の間で受け渡されます。    
また、OSではアプリケーションにメモリを割り当てることになっていました。    
メモリはどのように使われているのでしょうか。

### メモリのアドレス
メモリは、コンピュータがデータを格納する場所です。メモリは、番地と呼ばれる番号で管理されています。メモリ上の特定の場所を指すには、その場所の番地を使用します。メモリ番地は、0 から始まり、メモリの容量までの整数値です。

### メモリの構造
メモリは、現在のコンピュータでは通常、バイトと呼ばれる最小単位で構成され、1バイトは8ビットで構成されています。メモリのアドレスはバイト単位で付与されます。コンピュータは、データをバイト単位で読み書きします。

メモリは、アドレス空間と呼ばれる連続した番地の範囲で構成されています。アドレス空間は、物理アドレス空間と仮想アドレス空間に分けられます。

* **物理アドレス空間**: メモリチップ上に物理的に存在する番地の範囲
* **仮想アドレス空間**: プログラムが使用する論理的な番地の範囲    
仮想アドレス空間は、ページテーブルと呼ばれるデータ構造を使用して、物理アドレス空間にマッピングされます。ページテーブルは、仮想アドレスを物理アドレスに変換する情報が含まれています。

私たちが作るプログラムでは、仮想アドレス空間にアクセスしてプログラムを実行することになります。
