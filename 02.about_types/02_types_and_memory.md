# 2. 型とメモリ

コンピュータのしくみから、プログラムとメモリの関係を見てきました。ここでは、プログラミングをするうえで避けて通れない方とメモリの関係についてみていきます。

## スタックとヒープ

OS上で実行するプログラムからは、仮想メモリ空間にアクセスすることを説明しました。プログラムに割り当てられたメモリ領域は、スタックとヒープと呼ばれる2つの領域に分けられます。

* **スタック**：LIFO (Last In First Out) 方式でデータの追加と削除が行われる領域
    * 関数の呼び出しやローカル変数の保存などに使用される (プログラムの実行そのもの)
    * 自動的にメモリ管理が行われる

    ![](images/02_lifo_stack.svg)

* **ヒープ**：プログラムによって自由に使える領域
    * 動的にメモリを割り当てたり解放したりできる
    * 実行するまでサイズが決まらないデータ (文字列、画像など) の保存に使用される
    * メモリ管理をプログラム側で行う必要がある

## 型

型は、データの種類を表すものです。C言語などでは、int (整数)、float (浮動小数点数)、char (文字) などの型があります。型によって、データのサイズや表現方法などが決まります。

### 型の種類

型には、大きく分けて以下の2種類があります。

* **基本型**：言語によって定義されている基本的な型
    * 整数型 (int, short, long など)
    * 浮動小数点数型 (float, double など)
    * 文字型 (char など)
    * 論理型 (bool など)
* **複合型**：複数の基本型を組み合わせた型
    * 配列型
    * 構造体型
    * 共用体型
    * ポインタ型

### 基本型(プリミティブ型)

基本型のメモリ使用量は、型によって以下の通りです。

* **整型**
    * `char`: 1バイト
    * `short`: 2バイト
    * `int`: 4バイト
    * `long`: 8バイト
* **浮動小数点数型**
    * `float`: 4バイト
    * `double`: 8バイト
* **文字型**
    * `char`: 1バイト

これらの基本型の変数は、スタックに直接保存されます。

### ポインタ

ポインタは、メモリ上のデータのアドレスを保存する変数です。ポインタを使うことで、間接的にデータにアクセスすることができます。

文字列や画像など、ヒープ領域に保存するデータについて、そのデータが保存されているメモリ上のアドレスをスタック領域のローカル変数に保存することで、ヒープ領域のデータにアクセスすることができるようにするものです。
