# 1. Rubyとは

Rubyは、まつもとゆきひろ氏が1993年から開発しているオープンソースのプログラミング言語です。
公式サイトの「Rubyとは」 ( https://www.ruby-lang.org/ja/about/ ) の冒頭では、次のように書かれています。

> なぜRubyはこんなに人気なのでしょうか？Rubyのファンは、Rubyを美しく芸術的な言語だと言います。 なおかつ、便利で実用的だとも言います。 一体どういうことでしょうか？

このページの抜粋から、Rubyがどのような言語なのかを見ていきましょう。

## Rubyの作者の理念
> Rubyは絶妙にバランスのとれた言語です。 Rubyの作者である、Matzことまつもと ゆきひろ氏は、好みの言語(Perl、Smalltalk、Eiffel、Ada、Lisp)の一部をブレンドし、 関数型プログラミングと命令型プログラミングが絶妙に調和された新しい言語を作りました。

ここで5つのプログラミング言語が出てきました。これらのプログラミング言語は、Rubyができる前からある言語で、それぞれ異なる特徴を持っています。

* Perl    
簡潔に書くことができ、テキスト処理が得意で、Webスクリプト(CGI)に用いられます。
* Smalltalk    
オブジェクト指向の概念に忠実な言語で、クライアントアプリなどに用いられます。
* Eiffel    
厳格な型チェックを持つオブジェクト指向言語で、安全性を求められる開発に用いられます。
* Ada    
1979年に米国国防総省による信頼性、保守性に優れた言語という依頼をもとにできた言語です。
* Lisp
関数型プログラミングの代表的な言語で、データの操作などに用いられます。

Rubyはこれらの言語の良いところを集めた言語ということになります。ただし、良い面と悪い面は背中合わせの関係なので、Rubyがすべての面において優れているというわけではありません。例えばRubyは、書きやすく、柔軟という面を重視して、反面となる厳格な型チェックを言語としては省いています。この集めた良い面が絶妙なバランスで、多くの人に好まれています。

## Rubyの成長について

> TIOBE指標のような、人気や成長の度合いからプログラミング言語を測る指標のほとんどで、 Rubyはトップ10内にランクインしています。 こうした成長は、Rubyで書かれたソフトウェア、 とりわけWebアプリケーションフレームワークRuby on Railsの人気に起因しています。

TIOBE指標 ( https://www.tiobe.com/tiobe-index/ ) は、説明の通りプログラミング言語の人気を示す指標の1つです。このページを見るとわかりますが、プログラミング言語は何10種類も、ここに出てこないものも合わせれば何100種類もあります。その中でRubyは長く上位に入っていて、とても多くの人に使われていることがわかります。

Rubyの人気が高まったのは、説明にもある通り、WebアプリケーションフレームワークのRuby on Railsによるところがあります。Rubyだからこそできたフレームワークとも言えますし、そうしたフレームワークやライブラリが次々に出てくることで、Rubyは成長しています。

## すべてがオブジェクト

> Rubyでは、すべてのものはオブジェクトです。 すべての情報の塊・コードには、固有のプロパティとアクションを与えることができます。 オブジェクト指向プログラミングでは、プロパティはインスタンス変数、アクションはメソッドと呼ばれます。 Rubyによる純粋なオブジェクト指向のアプローチは、 最もよくみられる、数にアクションを与える以下のようなコード片で確認できます。
>
> ```
> 5.times { print "We *love* Ruby -- it's outrageous!" }
> ```
>
> 多くの言語では、数やそれ以外のプリミティブな型はオブジェクトではありません。 ですが、RubyはSmalltalkの影響を受け、すべての型がメソッドやインスタンス変数を与えられるようになっています。 これがRubyが使いやすい理由の一つです。 Rubyの世界では、オブジェクトに適用できることは、すべてのものに対して適用できるのです。

オブジェクト指向のオブジェクトは、データと処理をひとまとめにしたものです。データは属性、プロパティ、処理はメソッドと呼ばれます。コード片では、 `5` の `times` メソッドが実行されています。

コード片の後、プリミティブという言葉が出てきました。プリミティブな型は、プログラミング言語において、最も基本的なデータ型のことを指します。多くのプログラミング言語では、整数や実数、文字などはプリミティブな型としてメモリ上の領域の大きさが決められていて、データがその領域に直接保存されます。その結果メソッドを持ちません。

プリミティブな型の対になるものは参照型と呼ばれます。参照型ではオブジェクトがメモリ上のどこにあるのかを示すアドレスが保存されていて、オブジェクトにデータやメソッド(これも参照型です)が入っています。参照型はプリミティブな型に比べて速度的にやや不利ではあるのですが、Rubyでは使いやすさを優先してこのような構造になっています。

## Rubyの柔軟性

> Rubyは柔軟な言語として知られています。 Rubyでは、ユーザーが自由にその一部を変更することができます。 やろうと思えば、Rubyのコアな部分でさえ、削除したり再定義したりできます。 既存の部品をその上に追加することすらできます。 Rubyはプログラマを制限しない言語なのです。

プログラミング言語の柔軟というのはどういうことでしょうか。当たり前の話ですが、プログラミング言語はその言語のルールにしたがって書かなくてはなりません。もしそのルールを変更しようと思った場合、プログラミング言語そのものを改変することになるかもしれません。柔軟な言語は、ルールを変更したいソフトウェアの中で、変更内容をプログラムすることで、ルールを変更できてしまいます。Rubyはそれができる言語です。まったくおすすめできませんが、 `+` を引き算の演算子にすることだってできます。

## ブロック: 表現力豊かな機能

> Rubyのブロックもまた、偉大な柔軟性の源泉として知られています。 プログラマーは、どんなメソッドへも、メソッドがどのように振る舞うべきかを記述したクロージャを付け加えることができます。 このクロージャは ブロック と呼ばれます。 ブロックは、PHPやVisual Basicなどの命令型言語からRubyの世界に新しく入ってきた人たちにもっとも人気のある機能の一つになっています。

次はクロージャです。クロージャは処理の書き方の一形態です。説明にあるように、Rubyではブロックと呼ばれるクロージャで、関数に処理内容を渡すことができます。詳細を簡単に説明することは難しいのですが、またクロージャを使わなくても同様の内容を書くことはできるのですが、実際にプログラムを書いていくと、その書きやすさやわかりやすさが実感できます。

## RubyとMixin

> 多くのオブジェクト指向言語と異なり、Rubyは わざと 単一継承しか備えていません。 けれど、Rubyはモジュール(Objective-Cではカテゴリと呼ばれているもの)の概念を持ちます。モジュールとはメソッドの集合です。
>
> クラスはモジュールをミックスイン(Mixin)し、モジュールのすべてのメソッドを自由に受け取ることができます。 たとえば、eachメソッドが実装されたクラスは、Enumerableモジュールをミックスインして、 繰り返し処理にeachを使うメソッド群を追加することができます。
>
> ```
> class MyArray
>   include Enumerable
> end
> ```

Mixinはオブジェクト指向の概念の1つです。これはちょっと難しいので、後のオブジェクト指向の章で扱いたいと思います。

## Rubyの外観

> Rubyはとても限られた句読法を使い、英語のキーワードを好みます。 いくつかの句読法はRubyを修飾するためだけに使われます。 Rubyは変数宣言を必要としません。 変数のスコープを示すためには単純な命名規則が使われます。
>
> * `var` はローカル変数になります。
> * `@var` はインスタンス変数です。
> * `$var` はグローバル変数です。
>
> 上記の印は、プログラマがそれぞれの変数の役割を識別することを容易にし、読みやすさを向上させます。 また、すべてのインスタンスのメンバの前に付く億劫な `self.` をつける必要も無くなります。

プログラムを書く中では、たくさんの変数を作って使います。その変数がプログラム全体の中で全部見えてしまうと、名前が重複したり、誤って想定しない変数を書き換えてしまう恐れがあります。そういうことが起きないように、変数を参照できる範囲を限定するスコープという概念があります。そのスコープをオブジェクト指向の言語で使う場合、 `self.` や `this.` のような記述をしなければならない言語があるのですが、Rubyはその必要がありません。また、変数名を見ただけでローカル変数なのか、インスタンス変数なのかわかるのが便利な場合もあります。

## 基礎を超えて

ここではRubyのいくつかの機能が紹介されます。思い切って要約すると、以下のようになると思います。
* 他の新しい言語が持つ例外処理や、ガベージコレクションなどの機能を持っています。
* より高速で動作するためのC言語による拡張が作りやすくなっています。
* 様々なOSで動作し、OSに依存しない並列処理も可能です。

## さまざまなRuby処理系

> 言語としてのRubyには、いくつか別の処理系が存在しています。 このページでは、MRI (Matz Ruby Interpreter)あるいは CRuby (Cで書かれていることに由来する）と呼ばれる Rubyのリファレンス実装について記載していますが、別のRuby処理系も存在します。 他の言語や環境と統合したりMRIにはないような特別な機能を使いたい場合など、 ある特定の状況でそうしたRuby処理系は役に立ちます。
>
> MRI以外のRuby処理系には以下のようなものがあります。
> * JRubyは、JVM(Java仮想マシン)上に構築されたRubyです。 JVMの最適化されたJITコンパイラやGC、並行スレッド、ツール群、そして膨大なコレクションのライブラリを使うことができます。
> * mrubyはRubyの軽量実装です。アプリケーションにリンクし、組み込むことができます。Rubyの作者であるまつもと ゆきひろ氏によって開発が進められています。
> * trufflerubyはGraalVM上に構築された高速なRuby実装です。

この話はRubyを活用するようになると興味深い話です。「他の言語や環境と統合したり」できるのは、Rubyの良さの1つです。

「Rubyとは」の内容はここまでです。Rubyの良さや可能性を感じていただけたでしょうか。
